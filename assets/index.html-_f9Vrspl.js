import{r as l,g as R,j as t,b as I,u as A,d as F,e as L,a as O,c as T,R as K}from"./storage-oJWc5ht-.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function c(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(n){if(n.ep)return;n.ep=!0;const s=c(n);fetch(n.href,s)}})();const P=()=>{const[u,o]=l.useState([]),[c,d]=l.useState(""),[n,s]=l.useState(null),[i,h]=l.useState(null),[m,C]=l.useState(""),[g,x]=l.useState(""),[p,f]=l.useState(""),[w,b]=l.useState(!0);l.useEffect(()=>{r()},[]);const r=async()=>{const e=await R();o(e),b(!1)},j=async()=>{c.trim()&&(await I(c.trim()),d(""),r())},E=async e=>{confirm("Are you sure you want to delete this category?")&&(await F(e),r())},S=e=>{h(e.id),C(e.name)},N=async e=>{m.trim()&&(await A(e,m.trim()),h(null),r())},v=async e=>{!g.trim()||!p.trim()||(await O(e,{id:g.trim(),name:p.trim()}),x(""),f(""),r())},D=async(e,a)=>{confirm("Remove channel from this category?")&&(await L(e,a),r())},y=(e,a)=>{e.key==="Enter"&&(e.preventDefault(),a())};return t.jsxs("div",{className:"popup-container",children:[t.jsx("h2",{children:"BetterYT"}),!w&&u.length===0&&t.jsxs("div",{className:"welcome",children:[t.jsx("p",{children:"Welcome to BetterYT!"}),t.jsx("p",{children:"Create a category below to start curating your own YouTube feeds."})]}),t.jsxs("div",{className:"add-category",children:[t.jsx("input",{type:"text",placeholder:"Category name (e.g. Coding Tutorials)",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>y(e,j)}),t.jsx("button",{onClick:j,children:"Create"})]}),t.jsx("div",{className:"categories-list",children:u.map(e=>t.jsxs("div",{className:"category-item",children:[t.jsx("div",{className:"category-header",children:i===e.id?t.jsxs("div",{className:"edit-cat",children:[t.jsx("input",{type:"text",value:m,onChange:a=>C(a.target.value),onKeyDown:a=>y(a,()=>N(e.id)),autoFocus:!0}),t.jsx("button",{onClick:()=>N(e.id),children:"Save"}),t.jsx("button",{className:"btn-secondary",onClick:()=>h(null),children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("h3",{onClick:()=>s(n===e.id?null:e.id),children:[n===e.id?"▼":"▶"," ",e.name,t.jsxs("span",{className:"channel-count",children:[e.channels.length," channel",e.channels.length!==1?"s":""]})]}),t.jsxs("div",{className:"cat-actions",children:[t.jsx("button",{className:"btn-small",onClick:()=>S(e),title:"Rename",children:"Rename"}),t.jsx("button",{className:"btn-small btn-danger",onClick:()=>E(e.id),title:"Delete",children:"Del"})]})]})}),n===e.id&&!i&&t.jsxs("div",{className:"channels-section",children:[t.jsxs("ul",{className:"channels-list",children:[e.channels.map(a=>t.jsxs("li",{children:[t.jsxs("div",{className:"channel-info",children:[t.jsx("span",{className:"channel-name",children:a.name}),t.jsx("span",{className:"channel-id",title:a.id,children:a.id})]}),t.jsx("button",{onClick:()=>D(e.id,a.id),title:"Remove channel",children:"✕"})]},a.id)),e.channels.length===0&&t.jsx("li",{className:"empty-ch",children:'No channels yet. Use the "Add to Feed" button on YouTube or add manually below.'})]}),t.jsxs("div",{className:"add-channel",children:[t.jsx("span",{className:"add-channel-label",children:"Add channel manually:"}),t.jsx("input",{type:"text",placeholder:"Channel Name",value:p,onChange:a=>f(a.target.value)}),t.jsx("input",{type:"text",placeholder:"Channel ID (UC...)",value:g,onChange:a=>x(a.target.value),onKeyDown:a=>y(a,()=>v(e.id))}),t.jsx("button",{onClick:()=>v(e.id),children:"Add Channel"})]})]})]},e.id))})]})},k=document.getElementById("root"),Y=T.createRoot(k);Y.render(t.jsx(K.StrictMode,{children:t.jsx(P,{})}));
